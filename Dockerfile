# syntax=docker/dockerfile:1

FROM node:18-alpine
RUN apk update && apk upgrade
RUN npm install -g npm@9.6.6
WORKDIR .
COPY . .
RUN npm install sails -g
RUN npm install;  npm run build-for-prod; rm -rf node_modules/
RUN npm install --omit=dev
CMD sails lift --prod
EXPOSE 1337